# tinkoff_bot
Разработка бота, который бы мониторил приращения доходов в портфеле Тинькофф Инвестиций

# Описание бота

Бот на языке Python исполняет тривиальную задачу - раз в сутки измеряет прирост капиталовложений в соответствие с неким внешним источником, коррелирующим с биржей Тинькофф, на основании установленного внутри хранилища всех акций (задаются вручную) и присылает push-уведомление с информацией по всем акциям в некий мессенджер (ВК, Телеграм) заранее установленной группе лиц. 

# Используемые DTO

  <b>Stock</b>: name, cost

  <b>StocksPackage</b>: count, cost

  <b>StocksReport</b>: absolute_income, relative_income


# Интерфейс бота

  <b>add_stocks(name, count, cost)</b> - добавление нового пакета акций
  
  <b>delete_stocks(name, count)</b> - удаляет <b>count</b> акций <b>name</b>

# Функциональность бота

  Все акции хранятся в мапе <b>Map<String name, StocksPackage> stocks_packages</b>

  <b>add_stocks(name, count, cost)</b> - сначала проверяет существование акций с названием <b>name</b>, а потом добавляет в мапу <b>stocks_packages</b> по ключу <b>name</b> значение <b>{count, cost}</b>
  
  <b>delete_stocks(name, count)</b> - после проверки на то, что в пакете акций <b>name</b> есть нужное число акций, удаляет их (если были удалены все акции выбранного пакета - удаляет также и вхождение <b>name</b> в исходное множество всех пакетов акций)

  <b>take_stocks_cost()</b> - для каждого наименования акции делает обращение по HTTP и возвращает список List</Stock/>, в котором указаны текущие цены всех имеющихся у бота акций
  
  <b>form_report()</b> - вызывает <b>take_stocks_cost()</b> и результатом возвращает Map<name, StocksReport> res, формирующийся по следующему принципу: проходя по stocks_packages, добавляем в <b>res</b> текущее имя пакета в качестве ключа и разницу между стоимостью текущего пакета акций и акций в StocksPackage в двух форматах (абсолютном в рублях и относительном в процентах) в качестве значения

  <b>send_report()</b> - вызывает <b>form_report()</b> и в качестве ответа отдаёт String в какую-нибудь соцсеть (продумать), составленный из всех подотчётов по каждому пакету акций, а также суммирующий общую прибыль в абсолютном и относительном эквивалентах

  Бот имеет демона, отвечающего за формирование отчёта, который будет просыпаться раз в сутки и посылать отчёт. Главный поток бота отвечает за добавление и удаление акций.

# Соцсети
  Не имел дела с таким, пока не знаю, как боту сказать отправить тебе отчёт в том же ВК, который ты чекаешь чаще, чем ТГ (на мой взгляд). Для простоты реализации может посылать сообщения и в телегу (её я часто чекаю, и я на чеку)
